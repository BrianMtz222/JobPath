<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="perfil.css">
  <title>PERFIL</title>
  <style>
    /* --- CSS mínimo para que se vean bien los placeholders --- */
    .image-placeholder {
      width: 200px;
      height: 200px;
      border: 2px dashed #aaa;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin: 10px;
      text-align: center;
      font-size: 14px;
      color: #555;
    }
    #publicationsGrid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    #publicationsGrid img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <header>
    <div><strong>Mi Perfil</strong></div>
    <nav>
      <a href="/JobPath/index.html">Principal</a> |
      <a href="/JobPath/home/home.html">Inicio</a> |
      <a href="/JobPath/jovenes/jovenes.html">Jóvenes</a> |
      <a href="/JobPath/Capacitaciones/Capacitaciones.html">Capacitaciones</a> |
      <a href="/JobPath/companias/companias.html">Compañías</a> |
      <a href="/JobPath/About%20Us/about.html">Hacerca De..</a> |
      <a href="/JobPath/perfil/perfil.html" class="active">Perfil</a> |
    </nav>
    <nav class="language-nav">
      <button onclick="cambiarIdioma('es')">Español</button>
      <button onclick="cambiarIdioma('en')">English</button>
    </nav>
    <div id="google_translate_element" style="display:none;"></div>
  </header>

  <div class="profile-container">
    <h2 class="username" id="userNameDisplay"></h2>
    <h2 class="username" id="userLastnameDisplay"></h2>
    <p class="user-email" id="userEmailDisplay"></p>

    <div class="stats">
      <div>
        <strong id="publicationsCount">18</strong><br>publications
      </div>
      <div>
        <strong id="followersCount">10.394</strong><br>followers
      </div>
      <div>
        <strong id="pointsCount">50</strong><br>points
      </div>
    </div>

    <div class="top-right-buttons">
      <button class="edit-btn">Editar</button>
      <a href="https://brianmtz222.github.io/JobPath/Curriculum/Curriculum.html" class="settings-btn" role="button">CV</a>
    </div>
  </div>

  <div class="main-container">
    <div class="publications-header">
      <h3>Mis Publicaciones</h3>
      <button class="add-image-btn" id="addImageBtn">➕ Agregar Publicación</button>
    </div>

    <div class="publications" id="publicationsGrid">
      <div class="image-placeholder">
        <span>Haz click para agregar imagen</span>
      </div>
    </div>

    <div class="working">
      <h3>Actualmente trabajando en</h3>
      <div class="company-card">
        <img src="https://picsum.photos/400/200?random=7" alt="">
        <button>Ver Comapnia</button>
      </div>
    </div>
  </div>

  <!-- input oculto para seleccionar imágenes -->
  <input type="file" id="fileInput" accept="image/*" style="display:none;">

  <script>
  document.addEventListener('DOMContentLoaded', () => {
      const publicationsGrid = document.getElementById('publicationsGrid');
      const addImageBtn = document.getElementById('addImageBtn');
      const fileInput = document.getElementById('fileInput');

      // Maneja el clic en un placeholder
      const handlePlaceholderClick = (placeholderDiv) => {
          fileInput.placeholderToFill = placeholderDiv;
          fileInput.click();
      };

      // Crear un placeholder nuevo
      const createPlaceholder = () => {
          const placeholder = document.createElement('div');
          placeholder.classList.add('image-placeholder');
          placeholder.innerHTML = '<span>Haz click para agregar imagen</span>';
          placeholder.addEventListener('click', () => handlePlaceholderClick(placeholder));
          return placeholder;
      };

      // Evento para agregar publicación
      addImageBtn.addEventListener('click', () => {
          const newPlaceholder = createPlaceholder();
          publicationsGrid.appendChild(newPlaceholder);

          // actualizar contador
          const publicationsCountElement = document.getElementById('publicationsCount');
          let currentCount = parseInt(publicationsCountElement.textContent) || 0;
          publicationsCountElement.textContent = currentCount + 1;
      });

      // Inicializar el primer placeholder
      const initialPlaceholder = publicationsGrid.querySelector('.image-placeholder');
      if (initialPlaceholder) {
          initialPlaceholder.addEventListener('click', () => {
              handlePlaceholderClick(initialPlaceholder);
          });
      }

      // Manejar selección de archivo
      fileInput.addEventListener('change', (event) => {
          const file = event.target.files[0];
          const placeholderDiv = fileInput.placeholderToFill;

          if (file && placeholderDiv) {
              const reader = new FileReader();
              reader.onload = (e) => {
                  const img = document.createElement('img');
                  img.src = e.target.result;
                  img.alt = 'Publicación de usuario';
                  placeholderDiv.innerHTML = '';
                  placeholderDiv.appendChild(img);
                  placeholderDiv.classList.remove('image-placeholder');
                  event.target.value = '';
                  fileInput.placeholderToFill = null;
              };
              reader.readAsDataURL(file);
          }
      });
  });
  </script>

  <script src="../js/translate.js"></script>
  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>
